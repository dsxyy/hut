tosca_definitions_version: tosca_simple_profile_for_nfv_1_0_0_nokia

description: Siemens saam-lite scalable VNFD

topology_template:
  substitution_mappings:
    node_type: tosca.nodes.nfv.VNF
    properties:
      descriptor_id: siemens_saam_lite_verizon
      descriptor_version: '1.0'
      provider: Siemens
      product_name: Siemens SAAM Lite
      software_version: '1.0'
      product_info_name: Siemens SAAM Lite
      vnfm_info:
        - CBAM
    requirements:
      - virtual_link: [ oam_ecp, external_virtual_link ]
    capabilities:
      deployment_flavour:
        properties:
          flavour_id: scalable
          description: scalable_deployment
          instantiation_levels:
            base:
              description: ..
              vdu_levels:
                OAM:
                  number_of_instances: 1
          default_instantiation_level_id: base
          vdu_profile:
            OAM:
              min_number_of_instances: 1
              max_number_of_instances: 1 
    interfaces:
      Basic:
        instantiate:
        terminate:

  node_templates:
    OAM:
      type: tosca.nodes.nfv.VDU
      properties:
        description: OAM node
      requirements:
        - virtual_compute: server_compute
        - sw_image: server_image

    server_compute:
      type: tosca.nodes.nfv.VirtualCompute
      properties:
        virtual_memory:
            virtual_mem_size: 512 MB
        virtual_cpu:
            cpu_architecture: x86
            num_virtual_cpu: 1
            virtual_cpu_clock: 1800 MHz
 
    server_image:
      type: tosca.nodes.nfv.SwImage
      properties:
        sw_image: cirros
        checksum: ee1eca47dc88f4879d8a229cc70a07c6
        name: Software of Simple with one server
        version: 1.0
        container_format: qcow2
        disk_format: bare
        min_disk: 4 GB
        size: 12.5 MB

    oam_cp:
      type: tosca.nodes.nfv.ICP
      properties:
        layer_protocol: ipv4
      requirements:
        - virtual_binding: OAM
        - virtual_link: internal_vl

    # virtual links
    internal_vl:
      type: tosca.nodes.nfv.VL
      properties:
        connectivity_type:
          layer_protocol: ipv4
        vl_flavours: {}

    oam_ecp:
      type: tosca.nodes.nfv.ECP
      properties:
        layer_protocol: ipv4
      requirements:
        - internal_connection_point: oam_cp
        #- external_virtual_link: # exposed on VNF boundary
 
  policies:
    - commissioning:
        type: tosca.policies.nfv.Commissioning
        properties:
          ssh_key_management: generate_per_vnf
          connection_points:
            - oam_cp
    - heat_mapping:
        type: tosca.policies.nfv.HeatMapping
        properties:
          template:
            main: siemens.saamlite.hot.scalable.main.yaml
            nested:
              - oam.yaml
          static:
            vdus:
              OAM:
                - heatResource: oam.oam
                  connectionPoints:
                    oam_cp: oam.oam
